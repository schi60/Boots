<!--
    Boots
    Sophia, Emaan, Jun Jie
    P01
    SoftDev 2025
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home</title>
    <!-- Foundation CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.8.1/dist/css/foundation.min.css" crossorigin="anonymous">
    <!-- Foundation Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.min.css" crossorigin="anonymous">
    <!-- jQuery for Foundation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- Foundation JS -->
    <script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.8.1/dist/js/foundation.min.js" crossorigin="anonymous"></script>
    <style>
        body {
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0;
            background-image: url('/static/worldBackground.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 100vh;
            position: relative;
        }

        .icon-bar {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #333;
            border-radius: 5px;
            padding: 10px;
            z-index: 100;
        }

        .icon-bar a {
            display: block;
            color: white;
            padding: 10px;
            text-align: center;
            text-decoration: none;
        }

        .icon-bar a:hover {
            background: #555;
        }

        .icon-bar i {
            margin-right: 5px;
        }

        .fancy-font {
            font-family: Georgia, serif;
            font-style: italic;
            color: #2c3e50;
            margin-top: 40px;
            text-align: center;
        }

        .comic-font {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            color: #3498db;
        }

        .case-button {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 15px;
            background: #2c3e50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .case-button:hover {
            background: #34495e;
        }

        .suspect-list {
            list-style: none;
            padding-left: 0;
        }

        .suspect-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .suspect-list li:last-child {
            border-bottom: none;
        }

        /* Simple modal width fix */
        #case-modal {
            max-width: 800px;
        }

        /* Center flash messages */
        .flash-container {
            max-width: 600px;
            margin: 20px auto;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="icon-bar">
        {% if session['username'] %}
       <a href="/map"><i class="fi-map"></i> Map</a>
		 <a href="/settings"><i class="fi-widget"></i> Settings</a>
		 <a href="/auth/logout"><i class="fi-power"></i> Logout</a>
        {% else %}
        <a href="/auth/login"><i class="fi-key"></i> Login</a>
        <a href="/auth/signup"><i class="fi-clipboard-pencil"></i> Sign Up</a>
        {% endif %}
    </div>

    <!-- Main centered content -->
    <div class="centered-content">
        <!-- Option 1: Fancy font -->
        <h1 class="fancy-font title-large">HOME SWEET HOME</h1>

        {% if session['username'] %}

            <!-- Case Info Button -->
            <button class="case-button" data-open="case-modal">
                <i class="fi-book"></i> View Case File
            </button>
        </div>
        {% else %}
        <div style="text-align: center; margin-top: 20px;">
            <p>Please log in or sign up to play the murder mystery game.</p>
        </div>
        {% endif %}
		
			<!-- Restart Game Button (only shown to winners) -->
		{% if won_game %}
		<div class="restart-section" style="text-align: center; margin: 20px 0;">
		    <div class="callout success">
		        <h5>üéâ Investigation Complete! üéâ</h5>
		        <p>You've successfully solved the case!</p>
		        <a href="/reset-game" class="button alert">
		            <i class="fi-refresh"></i> Start New Investigation
		        </a>
		        <p style="font-size: 0.9em; margin-top: 10px; color: #666;">
		            <em>Click above to start a fresh mystery</em>
		        </p>
		    </div>
		</div>
		{% endif %}

		<!-- WIN/LOSE MESSAGES -->
	<div class="flash-container">
	    <!-- Display success message if player won -->
	    {% if success_message %}
	    <div class="callout success" data-closable>
	        <h5>üéâ CASE SOLVED! üéâ</h5>
	        <p>{{ success_message }}</p>
	        <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
	            <span aria-hidden="true">&times;</span>
	        </button>
	    </div>
	    {% endif %}
	    
	    <!-- Display flash messages for errors (when player loses) -->
	    {% with messages = get_flashed_messages(with_categories=true) %}
	        {% if messages %}
	            {% for category, message in messages %}
	                <div class="callout {{ 'alert' if category == 'error' else 'success' if category == 'success' else 'primary' }}" data-closable>
	                    {{ message }}
	                    <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
	                        <span aria-hidden="true">&times;</span>
	                    </button>
	                </div>
	            {% endfor %}
	        {% endif %}
	    {% endwith %}
	</div>

    <!-- Case Info Modal - KEEP IT SIMPLE -->
    <div class="reveal large" id="case-modal" data-reveal>
        <h2>üïµÔ∏è‚Äç‚ôÇÔ∏è CASE FILE: THE VANISHED COLLECTOR</h2>

        <div class="callout alert">
            <h5>URGENT INVESTIGATION</h5>
            <p><strong>Victim:</strong> Reginald Vanderbilt, 68-year-old art collector</p>
            <p><strong>Crime Scene:</strong> Vanderbilt Estate, bedroom</p>
            <p><strong>Time:</strong> Last night, 8 PM - midnight</p>
            <p><strong>Your Mission:</strong> Collect 6 clues, identify the murderer</p>
        </div>

        <h5>THE SUSPECTS</h5>
        <ul class="suspect-list">
            <li><strong>James Worthington</strong> - The Butler, age 62. Being fired after 30 years.</li>
            <li><strong>Vivian Lacroix</strong> - Art Dealer, age 45. Sold $2M in forged art.</li>
            <li><strong>Miles Vanderbilt</strong> - The Nephew, age 32. Sole heir to $50M estate.</li>
            <li><strong>Mrs. Henderson</strong> - The Cook, age 58. Son facing embezzlement charges.</li>
            <li><strong>Dr. Alistair Finch</strong> - Rival Collector, age 71. Obsessed with a rare dagger.</li>
        </ul>

        <h5>HOW TO PLAY</h5>
        <ol>
            <li>Go to the Map and explore each room</li>
            <li>Find and collect clues in each room (6 total)</li>
            <li>Record each clue by clicking "Record This Clue"</li>
            <li>When you have all 6 clues, go to the Front Lawn</li>
            <li>Enter the secret study and make your accusation</li>
        </ol>

        <p><em>All suspects have motives. Your job is to find who had the means and opportunity.</em></p>
        
        <!-- SIMPLE CLOSE BUTTON - exactly like your other modals -->
        <button class="close-button" data-close aria-label="Close modal" type="button">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>


    <script>
        $(document).foundation();
    </script>
</body>